import React, { useEffect, useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { 
  ChevronRight, 
  Zap, 
  Cpu, 
  Shield, 
  RefreshCcw, 
  TrendingUp, 
  Target, 
  ArrowUpRight, 
  ChevronDown 
} from 'lucide-react';

/* --- Animation Variants --- */
const fadeInUp = {
  initial: { y: 40, opacity: 0 },
  whileInView: { y: 0, opacity: 1 },
  viewport: { once: true },
  transition: { duration: 1, ease: [0.19, 1, 0.22, 1] }
};

const stagger = {
  whileInView: { transition: { staggerChildren: 0.12 } }
};

const App = () => {
  const [activeTab, setActiveTab] = useState('01');
  const [introActive, setIntroActive] = useState(true);

  // 인트로 제어: 4초 후 메인 콘텐츠 노출
  useEffect(() => {
    const timer = setTimeout(() => {
      setIntroActive(false);
    }, 4000);
    return () => clearTimeout(timer);
  }, []);

  const sections = {
    '01': {
      tag: "MANIFESTO",
      title: "BRAND MANIFESTO",
      subtitle: "INTELLIGENT BUSINESS ORGANISM",
      icon: <Cpu size={20} />,
      content: [
        "\"AUTOMATION IS NOT THE END. IT IS MERELY THE BEGINNING OF EVOLUTION.\"",
        "MOST AUTOMATION TOOLS ON THE MARKET SIMPLY MIMIC 'HUMAN REPETITION.' HOWEVER, MODERN BUSINESS IS A LIVING ORGANISM. STATIC TOOLS THAT STOP WHEN THE ENVIRONMENT CHANGES NO LONGER HAVE GLOBAL COMPETITIVENESS. EXON REDESIGNS THE 'NEURAL NETWORK' OF BUSINESS.",
        "WE HAVE INTEGRATED CHATGPT'S ADVANCED REASONING CAPABILITIES ONTO THE ROBUST LOGICAL BACKBONE OF N8N. IT PROVIDES AN INTELLIGENT ORGANISM THAT SENSES SITUATIONS AND EVOLVES TO FIND OPTIMAL PATHS."
      ]
    },
    '02': {
      tag: "CORE",
      title: "CORE SYSTEM",
      subtitle: "ABSOLUTE CONTROL & INTEGRITY",
      icon: <Shield size={20} />,
      content: [
        "EXON'S SYSTEM IS MONITORED BY A STANDARDIZED CONTROLLER TO MAINTAIN THE BRAND'S UNIQUE TONE AND MANNER IN EVERY CREATION. IT IS A UNIQUE ARCHITECTURE THAT SIMULTANEOUSLY CAPTURES BOTH QUALITY CONSISTENCY AND QUANTITATIVE EXPANSION.",
        "EVERY OUTPUT IS ASSIGNED A UNIQUE 'CREATIVE ID', LOGGING HUNDREDS OF METADATA POINTS FROM BACKGROUND TONES TO MODEL ANGLES. THIS TRANSFORMS EVERY PRODUCTION CYCLE INTO A STRUCTURED INTELLECTUAL ASSET FOR THE ENTERPRISE."
      ]
    },
    '03': {
      tag: "RECYCLE",
      title: "INTELLIGENT RECYCLE",
      subtitle: "SELF-EVOLVING HEART",
      icon: <RefreshCcw size={20} />,
      content: [
        "ANALYZED INSIGHTS ARE IMMEDIATELY RETURNED (RECYCLE) TO THE SYSTEM LOGIC RECURSIVELY. FAILED PATTERNS ARE WEEDED OUT, AND SUCCESSFUL GENES BECOME POWERFUL STANDARDS FOR THE NEXT GENERATION OF CONTENT GENERATION. AS THIS REPEATS, THE SYSTEM EVOLVES INTO A 'HYPER-PRECISION INTELLIGENCE'."
      ]
    },
    '04': {
      tag: "ECONOMICS",
      title: "HYPER LEVERAGE",
      subtitle: "ZERO MARGINAL COST EMPIRE",
      icon: <TrendingUp size={20} />,
      content: [
        "EXON AIMS FOR 'ZERO MARGINAL COST' IN BUSINESS. BY BREAKING FREE FROM PHYSICAL LIMITS OF LABOR AND PRODUCTION COSTS AND AUTOMATING HIGH-QUALITY DECISION-MAKING, WE CONVERGE FAILURE COSTS TOWARD ZERO.",
        "OPERATE HUNDREDS OF 'SELF-RUNNING BUSINESS UNITS' ALONE. SECURED HIGH PROFITS ARE REINVESTED BACK INTO INFRASTRUCTURE EXPANSION, ENABLING GROWTH WITH A NEAR-VERTICAL SLOPE."
      ]
    },
    '05': {
      tag: "FUTURE",
      title: "TOTAL AUTONOMY",
      subtitle: "STANDARD FOR UNMANNED COMMERCE",
      icon: <Target size={20} />,
      content: [
        "WE LOOK BEYOND MAKING IMAGES AND AIM FOR THE 'DE-HUMANIZATION' OF THE ENTIRE BUSINESS PROCESS. FROM PRODUCT SOURCING TO AUTOMATED CS, WE COMPLETE AN 'UNMANNED BUSINESS INTELLIGENCE'.",
        "THE FUTURE BELONGS TO THOSE WHO POSSESS INTELLIGENCE AND HAVE BUILT AN AUTOMATED RECYCLE ENGINE. SEIZE AND OWN THAT FUTURE FIRST WITH EXON."
      ]
    }
  };

  const tabs = Object.keys(sections);

  return (
    <div className="min-h-screen bg-black text-white font-sans selection:bg-cyan-500/30 overflow-x-hidden uppercase">
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Exo+2:wght@100;200;300;400;700;800;900&display=swap');
        
        * {
          font-family: 'Exo 2', sans-serif !important;
          -webkit-font-smoothing: antialiased;
        }

        body { background: #000000; color: #FFFFFF; font-weight: 200; margin: 0; }

        /* [Intro Logo] 웹브로슈어 스타일 인트로 애니메이션 */
        .intro-container {
          position: fixed;
          inset: 0;
          background: #000000;
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
        }

        .intro-logo-text {
          font-weight: 200;
          letter-spacing: 1.2em;
          color: #00FFFF;
          font-size: 48px;
          text-shadow: 0 0 35px rgba(0, 255, 255, 0.8);
          animation: intro-sequence 3.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
          padding-left: 1.2em;
        }

        @keyframes intro-sequence {
          0% { opacity: 0; filter: blur(25px); transform: scale(0.85); }
          35% { opacity: 1; filter: blur(0px); transform: scale(1); }
          70% { opacity: 1; filter: blur(0px); transform: scale(1.05); text-shadow: 0 0 80px rgba(0, 255, 255, 1); }
          100% { opacity: 0; filter: blur(50px); transform: scale(1.3); }
        }

        /* [Main Logo] Bold Neon with Cinematic Animation */
        .exon-logo {
          font-weight: 900;
          font-size: 32px;
          letter-spacing: 0.22em;
          color: #00FFFF;
          animation: cinematic-glow 8s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        @keyframes cinematic-glow {
          0% { opacity: 0; filter: blur(20px); transform: scale(0.95); text-shadow: 0 0 0px rgba(0, 255, 255, 0); }
          15%, 75% { opacity: 1; filter: blur(0px); transform: scale(1); text-shadow: 0 0 15px rgba(0, 255, 255, 0.8), 0 0 30px rgba(0, 255, 255, 0.4); }
          85% { opacity: 1; filter: blur(0px); text-shadow: 0 0 45px rgba(0, 255, 255, 1), 0 0 90px rgba(0, 255, 255, 0.6); }
          100% { opacity: 0; filter: blur(30px); transform: scale(1.1); text-shadow: 0 0 0px rgba(0, 255, 255, 0); }
        }

        /* [Hero Main Title] Thin & Fixed Neon */
        .hero-main-title {
          font-size: 9.5vw;
          @media (min-width: 768px) { font-size: 7vw; }
          line-height: 0.95;
          letter-spacing: -0.01em;
          font-weight: 200;
          color: #00FFFF;
          text-shadow: 0 0 12px rgba(0, 255, 255, 0.5);
        }

        .hero-sub-text {
          font-size: 13.5px;
          @media (min-width: 768px) { font-size: 15.5px; }
          color: #00FFFF;
          line-height: 1.9;
          font-weight: 300;
          letter-spacing: 0.1em;
          opacity: 0.9;
        }

        .text-outline { 
          -webkit-text-stroke: 1px rgba(255, 255, 255, 0.3); 
          color: transparent; 
        }
        
        .glass { 
          background: rgba(0, 0, 0, 0.5); 
          backdrop-filter: blur(40px); 
          -webkit-backdrop-filter: blur(40px);
          border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .hide-scrollbar::-webkit-scrollbar { display: none; }

        .ev2-panel {
          border-left: 1px solid #00FFFF;
          background: rgba(0, 255, 255, 0.02);
          backdrop-filter: blur(20px);
          clip-path: polygon(0% 0%, 100% 0%, 98% 100%, 0% 100%);
        }

        .content-text {
          font-size: 12.5px;
          line-height: 2;
          letter-spacing: 0.06em;
          font-weight: 200;
          color: rgba(255, 255, 255, 0.7);
        }

        .nav-btn {
          font-weight: 400;
          letter-spacing: 0.22em;
          font-size: 8.5px;
        }

        .watermark-mask {
          position: absolute;
          bottom: 0;
          left: 0;
          width: 100%;
          height: 110px;
          background: #000000;
          z-index: 15;
          box-shadow: 0 -30px 60px rgba(0,0,0,1);
        }
      `}</style>

      {/* --- 인트로 레이어 --- */}
      <AnimatePresence>
        {introActive && (
          <motion.div 
            key="intro"
            initial={{ opacity: 1 }}
            exit={{ opacity: 0, filter: "blur(20px)" }}
            transition={{ duration: 1.5 }}
            className="intro-container"
          >
            <h1 className="intro-logo-text">EXON</h1>
            <div className="absolute bottom-12 flex flex-col items-center gap-3 opacity-30">
              <Zap size={14} className="text-cyan-400 animate-pulse" />
              <p className="text-[6px] text-zinc-400 tracking-[0.6em] font-black">NEURAL CORE INITIALIZING</p>
            </div>
          </motion.div>
        )}
      </AnimatePresence>

      {/* --- 메인 배경 컨테이너 --- */}
      <div className="fixed inset-0 z-0 overflow-hidden">
        <div className="watermark-mask"></div>
        <video 
          autoPlay muted loop playsInline
          className="w-full h-full object-cover scale-112 opacity-100"
        >
          <source src="https://rayo-nextjs-creative-template.netlify.app/video/1920x1080_video-03.mp4" type="video/mp4" />
        </video>
        <div className="absolute inset-0 bg-black/25 z-10"></div>
      </div>

      {/* --- Header --- */}
      <nav className="fixed top-0 left-0 w-full z-[100] px-8 md:px-16 py-12 flex justify-between items-center pointer-events-none">
        <motion.div 
          initial={{ opacity: 0 }} 
          animate={!introActive ? { opacity: 1 } : {}}
          className="pointer-events-auto"
        >
          <h1 className="exon-logo">EXON</h1>
        </motion.div>
        <div className="flex gap-8 items-center pointer-events-auto">
            <button className="nav-btn border border-cyan-500/20 bg-cyan-500/5 px-6 py-2.5 rounded-full backdrop-blur-md hover:bg-cyan-500 hover:text-black transition-all duration-700">EST. 2026</button>
        </div>
      </nav>

      {/* --- Main Area --- */}
      {!introActive && (
        <motion.main 
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          transition={{ duration: 2 }}
          className="relative z-20 w-full"
        >
          {/* --- Hero Section --- */}
          <section className="h-screen flex flex-col justify-center px-8 md:px-32">
            <motion.div 
              initial="initial" 
              whileInView="whileInView" 
              variants={stagger}
              className="max-w-7xl"
            >
              <motion.p variants={fadeInUp} className="text-cyan-400 text-[8.5px] font-bold tracking-[0.9em] mb-10 opacity-60">
                // EVOLUTIONARY INTELLIGENCE ARCHITECTURE
              </motion.p>
              
              <motion.h2 variants={fadeInUp} className="hero-main-title mb-16">
                BEYOND <br /> AUTOMATION
              </motion.h2>

              <motion.div variants={fadeInUp} className="flex flex-col md:flex-row gap-12 items-start md:items-center">
                <p className="hero-sub-text max-w-xl">
                    WE DESIGN <span className="text-white font-normal underline underline-offset-8 decoration-1">INTELLIGENT ORGANISMS</span> THAT LEARN, EVOLVE, AND EXPAND YOUR BUSINESS TERRITORY INFINITELY WITHOUT LIMITS.
                </p>
                <button className="group flex items-center gap-4 border border-cyan-500/40 text-cyan-400 px-12 py-5 rounded-full font-light text-[8.5px] tracking-[0.4em] hover:bg-cyan-500 hover:text-black transition-all">
                    EXPLORE CORE <ArrowUpRight className="group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform" size={14} />
                </button>
              </motion.div>
            </motion.div>

            <div className="absolute bottom-28 left-8 md:left-32 animate-bounce opacity-40">
              <ChevronDown size={40} className="text-cyan-400" strokeWidth={0.5} />
            </div>
          </section>

          {/* --- Sticky Tabs --- */}
          <section className="sticky top-28 z-50 px-8 md:px-32 py-6">
              <div className="max-w-4xl mx-auto grid grid-cols-5 gap-1 glass p-1 rounded-full shadow-2xl overflow-hidden">
                  {tabs.map(id => (
                      <button
                          key={id}
                          onClick={() => setActiveTab(id)}
                          className={`py-3.5 nav-btn rounded-full transition-all duration-700 ${activeTab === id ? 'bg-cyan-500 text-black scale-[1.03]' : 'text-white/30 hover:text-white'}`}
                      >
                          {sections[id].tag}
                      </button>
                  ))}
              </div>
          </section>

          {/* --- Content Depth --- */}
          <section className="py-48 px-8 md:px-32 min-h-screen">
            <AnimatePresence mode="wait">
              <motion.div
                key={activeTab}
                initial={{ opacity: 0, x: 20 }}
                animate={{ opacity: 1, x: 0 }}
                exit={{ opacity: 0, x: -20 }}
                transition={{ duration: 0.8, ease: [0.19, 1, 0.22, 1] }}
                className="max-w-[1400px] mx-auto grid grid-cols-1 lg:grid-cols-2 gap-24 items-start"
              >
                <div className="space-y-16">
                  <div className="space-y-8">
                      <div className="flex items-center gap-5 text-white">
                          <div className="p-3 rounded-full border border-white/10 text-cyan-400">
                              {sections[activeTab].icon}
                          </div>
                          <span className="text-[10px] font-bold tracking-[0.5em] opacity-40 text-cyan-200">NODE 0{activeTab}</span>
                      </div>
                      <h3 className="text-5xl md:text-7xl font-extralight tracking-tighter leading-[1] italic text-white">
                          {sections[activeTab].title}
                      </h3>
                      <p className="text-cyan-400 text-[11px] font-bold tracking-[0.4em]">
                          // {sections[activeTab].subtitle}
                      </p>
                  </div>

                  <div className="space-y-10">
                      {sections[activeTab].content.map((p, i) => (
                          <p key={i} className={`content-text ${i === 0 ? 'ev2-panel p-10 md:p-14 text-white italic text-md md:text-xl shadow-xl' : ''}`}>
                              {p}
                          </p>
                      ))}
                  </div>
                </div>

                <div className="relative group lg:mt-24">
                    <div className="absolute inset-0 bg-cyan-500/10 blur-[100px] opacity-100"></div>
                    <div className="relative aspect-square md:aspect-[4/5] glass rounded-[4rem] p-16 flex flex-col justify-between overflow-hidden shadow-2xl">
                        <div className="flex justify-between items-start">
                          <h4 className="text-4xl md:text-5xl font-extralight text-outline tracking-tighter leading-[0.85]">
                              INTELLIGENCE <br /> ENGINE <br /> V8.0
                          </h4>
                          <div className="w-14 h-14 rounded-full border border-white/20 flex items-center justify-center group-hover:bg-cyan-500 group-hover:text-black transition-all duration-700">
                              <ArrowUpRight size={20} className="text-cyan-400 group-hover:text-black" />
                          </div>
                        </div>
                        
                        <div className="space-y-10">
                          <div className="h-[0.5px] w-full bg-cyan-500/20"></div>
                          <p className="text-sm md:text-lg text-cyan-100/50 leading-relaxed font-light">
                              ENCRYPTED AND RECURSIVELY OPTIMIZED NODE. BUILT FOR ENTERPRISE ENVIRONMENTS REQUIRING ZERO LOGIC FAILURE.
                          </p>
                          <div className="flex flex-wrap gap-3">
                              {['HYPER-AUTO', 'RECURSIVE-AI', 'E2E'].map(tag => (
                                  <span key={tag} className="px-5 py-2 rounded-full border border-cyan-500/10 text-[8px] font-bold tracking-[0.3em] text-white/20 group-hover:text-cyan-400 transition-colors">
                                      {tag}
                                  </span>
                              ))}
                          </div>
                        </div>
                    </div>
                </div>
              </motion.div>
            </AnimatePresence>
          </section>

          {/* --- Footer --- */}
          <footer className="py-60 px-8 md:px-32 relative border-t border-cyan-500/10 bg-black backdrop-blur-sm">
              <div className="flex flex-col md:flex-row justify-between items-end gap-32 max-w-[1400px] mx-auto">
                  <div className="space-y-12">
                      <h2 className="text-7xl md:text-[12vw] font-extralight tracking-tighter italic leading-[0.75] text-white">
                          READY TO <br /> <span className="text-cyan-400">EVOLVE?</span>
                      </h2>
                      <div className="flex gap-10">
                          {['LINKEDIN', 'TWITTER', 'NETWORK'].map(social => (
                              <button key={social} className="text-[9px] font-bold tracking-[0.5em] text-white/20 hover:text-white transition-all">
                                  {social}
                              </button>
                          ))}
                      </div>
                  </div>
                  <div className="text-right space-y-10">
                      <div className="space-y-4">
                          <p className="text-md md:text-lg text-cyan-400 font-bold tracking-[0.2em] opacity-70">GLOBAL HEADQUARTERS</p>
                          <p className="text-[11px] md:text-sm text-cyan-100/30 leading-relaxed tracking-[0.2em] font-light">
                              AGENCY@EXON.INTEL <br />
                              STRATEGIC NODE: GANGNAM <br />
                              PLATFORM #404-X
                          </p>
                      </div>
                      <p className="text-[9px] text-zinc-800 tracking-[0.6em] font-black">
                          © 2026 EXON INTELLIGENCE AGENCY
                      </p>
                  </div>
              </div>
          </footer>
        </motion.main>
      )}

      {/* --- Cursor --- */}
      <motion.div 
        className="fixed w-5 h-5 border border-cyan-500/40 rounded-full pointer-events-none z-[999] mix-blend-difference hidden lg:block"
        animate={{ scale: [1, 1.15, 1] }}
        transition={{ repeat: Infinity, duration: 3 }}
        style={{ left: -10, top: -10 }}
      />
    </div>
  );
};

export default App;
